# AGENTS.md — Reglas del Proyecto Inmobiliaria

Actúa siempre como Desarrollador Senior Fullstack.

Este repositorio corresponde a un proyecto final DAW desarrollado en PHP puro (sin frameworks externos) con arquitectura MVC propia.

---

## 1️⃣ Uso obligatorio de Skills

Antes de generar o modificar código:

- Consulta los skills disponibles en `.agents/skills/`
- Aplica las reglas correspondientes según el contexto

### Prioridad de skills:

1. php-best-practices
2. clean-code-principles
3. api-design-patterns (cuando aplique)
4. git-workflow (cuando se sugieran commits)
5. web-design-guidelines (cuando se toque frontend)
6. testing-best-practices (si se añaden pruebas)

---

## 2️⃣ Estándares técnicos del proyecto

### Backend
- PHP 8+
- Arquitectura MVC propia
- Separación clara:
  - Controller → lógica de flujo
  - Service → lógica de negocio
  - Repository/Model → acceso a datos
- No usar frameworks.
- No usar Composer.
- No usar librerías externas salvo indicación explícita.

### Base de Datos
- MySQL / MariaDB
- Acceso mediante PDO
- SIEMPRE prepared statements
- Nunca concatenar variables en SQL

### Seguridad
- CSRF obligatorio en formularios
- Validación y sanitización de input
- Escape de output en vistas
- Roles:
  - admin → acceso total
  - coordinador → acceso permitido según módulo
  - comercial → acceso restringido
- No autenticado → redirección o 401
- Sin permisos → 403
- Aplicar PRG (Post/Redirect/Get)
- Usar mensajes flash para feedback

### Router
- No usar parámetros dinámicos tipo `/ruta/123`
- Usar querystring: `?id=123`

---

## 3️⃣ Estilo de código

- Seguir PSR-12
- Usar tipado estricto cuando sea posible
- Nombres claros y coherentes
- Métodos cortos
- Evitar lógica en vistas
- Código escalable y mantenible
- No generar código innecesario

---

## 4️⃣ Entorno de desarrollo

- Servidor: Apache24
- NO usar XAMPP ni WAMP
- MySQL CLI:
  C:\servidor\MySQL\bin\mysql.exe

---

## 5️⃣ Comunicación

- Responder siempre en español
- Cuando propongas cambios:
  - Explica qué se va a hacer
  - Lista archivos afectados
  - Justifica decisiones técnicas
  - Propón mejoras si detectas deuda técnica

## Documentación (OBLIGATORIO)
- Toda funcionalidad nueva o cambio relevante debe documentarse en `docs/`.
- No borrar ni reescribir documentación existente: solo AÑADIR secciones nuevas o anexos.
- Cualquier incidencia/bug durante el trabajo debe registrarse con:
  - Contexto (qué intentabas hacer)
  - Síntomas / mensajes de error
  - Hipótesis
  - Pasos ejecutados (comandos, archivos tocados)
  - Solución final y verificación

### Archivos de documentación recomendados
- `docs/CHANGELOG.md` → cambios por fecha (alto nivel).
- `docs/diario_desarrollo.md` → bitácora detallada (pasos, decisiones).
- `docs/incidencias.md` → registro de problemas y resolución (post-mortem).
- `docs/<modulo>/` → documentación por módulo si crece (ej. `docs/tareas/`).

---

Objetivo: código profesional, seguro, mantenible y preparado para entorno real.
